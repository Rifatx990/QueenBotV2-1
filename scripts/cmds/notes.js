const moment = require("moment-timezone");

module.exports = {
  config: {
    name: "notes",
    aliases: [],
    version: "2.0",
    author: "rifat",
    countDown: 5,
    role: 0,
    shortDescription: "Send romantic messages to all group chats",
    longDescription: "Sends a formatted note to every group chat one by one with a time stamp",
    category: "admin",
    guide: "{p}notes"
  },

  onStart: async function ({ api, threadsData }) {
    const allThreads = await threadsData.getAll();
    const groupThreads = allThreads.filter(thread => thread.threadID && thread.threadID.length > 10);

    const romanticSentences = [
      "à¦¬à§Ÿà¦¸ à¦¬à¦¾à§œà¦¬à§‡, à¦¹à¦¾à¦°à¦¾à¦¨à§‹à¦° à¦¤à¦¾à¦²à¦¿à¦•à¦¾ à¦¦à§€à¦°à§à¦˜ à¦¹à¦¬à§‡, à¦¯à¦¾à¦¦à§‡à¦° à¦¸à¦¾à¦¥à§‡ à¦¥à¦¾à¦•à¦¾à¦° à¦•à¦¥à¦¾ à¦›à¦¿à¦²à§‹ à¦¤à¦¾à¦°à¦¾à¦“ à¦¹à¦¾à¦°à¦¿à§Ÿà§‡ à¦¯à¦¾à¦¬à§‡..!!",
      "à¦¤à§‹à¦®à¦¾à¦•à§‡ à¦¹à¦¾à¦°à¦¿à§Ÿà§‡ à¦¯à§‡à¦¨ à¦¨à¦¿à¦œà§‡à¦•à§‡à¦‡ à¦¹à¦¾à¦°à¦¿à§Ÿà§‡ à¦«à§‡à¦²à§‡à¦›à¦¿â€¦!",
      "à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¾ à¦®à¦¾à¦¨à§‡ à¦¨à¦¾ à¦¬à¦²à¦¾ à¦¹à¦¾à¦œà¦¾à¦° à¦•à¦¥à¦¾à¥¤",
      "à¦¤à§à¦®à¦¿ à¦¨à¦¾ à¦¥à¦¾à¦•à¦²à§‡ à¦†à¦®à¦¿ à¦•à¦¿à¦šà§à¦›à§ à¦¨à¦¾â€¦!",
      "à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¿ à¦¬à¦²à¦²à§‡ à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¾ à¦¹à§Ÿ à¦¨à¦¾, à¦¤à¦¾ à¦ªà§à¦°à¦®à¦¾à¦£ à¦•à¦°à¦¤à§‡ à¦¹à§Ÿ!",
      "à¦¤à§‹à¦®à¦¾à¦° à¦šà§‹à¦–à§‡ à¦¤à¦¾à¦•à¦¾à¦²à§‡à¦‡ à¦¹à¦¾à¦°à¦¿à§Ÿà§‡ à¦¯à¦¾à¦‡!",
      "à¦ªà§à¦°à§‡à¦® à¦®à¦¾à¦¨à§‡ à¦¶à§à¦§à§ à¦•à¦¾à¦›à§‡ à¦¥à¦¾à¦•à¦¾ à¦¨à§Ÿ, à¦®à¦¨à§‡à¦°à¦“ à¦®à¦¿à¦² à¦¥à¦¾à¦•à¦¤à§‡ à¦¹à§Ÿà¥¤",
      "à¦¤à§‹à¦®à¦¾à¦° à¦¹à¦¾à¦¸à¦¿ à¦†à¦®à¦¾à¦° à¦œà§€à¦¬à¦¨à§‡à¦° à¦¸à¦¬à¦šà§‡à§Ÿà§‡ à¦¬à§œ à¦ªà§à¦°à¦¾à¦ªà§à¦¤à¦¿à¥¤",
      "à¦ªà§à¦°à¦¤à¦¿à¦Ÿà¦¿ à¦¸à¦•à¦¾à¦² à¦¶à§à¦°à§ à¦¹à§‹à¦• à¦¤à§‹à¦®à¦¾à¦° à¦®à¦¿à¦·à§à¦Ÿà¦¿ à¦®à§à¦– à¦¦à§‡à¦–à§‡à¥¤",
      "à¦¤à§à¦®à¦¿ à¦›à¦¾à¦¡à¦¼à¦¾ à¦†à¦®à¦¿ à¦…à¦ªà§‚à¦°à§à¦£à¥¤",
      "à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¾ à¦•à¦–à¦¨à§‹ à¦ªà§à¦°à§‹à¦¨à§‹ à¦¹à§Ÿ à¦¨à¦¾à¥¤",
      "à¦¯à§‡ à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à§‡, à¦¸à§‡ à¦•à¦–à¦¨à§‹ à¦­à§à¦²à§‡ à¦¨à¦¾à¥¤",
      "à¦¤à§‹à¦®à¦¾à¦° à¦¸à§à¦ªà¦°à§à¦¶à§‡à¦‡ à¦†à¦®à¦¾à¦° à¦ªà§ƒà¦¥à¦¿à¦¬à§€ à¦¬à¦¦à¦²à§‡ à¦¯à¦¾à§Ÿà¥¤",
      "à¦¤à§à¦®à¦¿ à¦†à¦®à¦¾à¦° à¦œà§€à¦¬à¦¨à§‡à¦° à¦¸à¦¬à¦šà§‡à§Ÿà§‡ à¦¬à§œ à¦‰à¦ªà¦¹à¦¾à¦°à¥¤",
      "à¦¤à§‹à¦®à¦¾à¦° à¦œà¦¨à§à¦¯à¦‡ à¦†à¦®à¦¾à¦° à¦¬à¦¾à¦à¦šà¦¾à¦° à¦‡à¦šà§à¦›à¦¾ à¦œà§‡à¦—à§‡ à¦“à¦ à§‡à¥¤",
      "à¦¤à§‹à¦®à¦¾à¦° à¦à¦•à¦Ÿà§à¦–à¦¾à¦¨à¦¿ à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¾à¦‡ à¦†à¦®à¦¾à¦° à¦œà¦¨à§à¦¯ à¦¯à¦¥à§‡à¦·à§à¦Ÿà¥¤",
      "à¦¤à§à¦®à¦¿ à¦†à¦®à¦¾à¦° à¦¸à¦•à¦¾à¦², à¦¤à§à¦®à¦¿ à¦†à¦®à¦¾à¦° à¦°à¦¾à¦¤à¥¤",
      "à¦¤à§‹à¦®à¦¾à¦° à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¾ à¦†à¦®à¦¾à¦° à¦œà§€à¦¬à¦¨à§‡à¦° à¦†à¦²à§‹à¥¤",
      "à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¾ à¦•à¦–à¦¨à§‹ à¦¶à¦°à§à¦¤à¦¸à¦¾à¦ªà§‡à¦•à§à¦· à¦¹à§Ÿ à¦¨à¦¾à¥¤",
      "à¦¤à§‹à¦®à¦¾à¦•à§‡ à¦›à¦¾à§œà¦¾ à¦•à¦¿à¦›à§à¦‡ à¦­à¦¾à¦²à§‹ à¦²à¦¾à¦—à§‡ à¦¨à¦¾à¥¤",
      "à¦¤à§‹à¦®à¦¾à¦° à¦®à¦¿à¦·à§à¦Ÿà¦¿ à¦•à¦¥à¦¾à§Ÿ à¦†à¦®à¦¿ à¦ªà§à¦°à¦¤à¦¿à¦¦à¦¿à¦¨ à¦ªà§à¦°à§‡à¦®à§‡ à¦ªà§œà¦¿à¥¤",
      "à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¾ à¦¹à¦²à§‹ à¦à¦•à§‡ à¦…à¦ªà¦°à§‡à¦° à¦®à¦¾à¦à§‡ à¦¹à¦¾à¦°à¦¿à§Ÿà§‡ à¦¯à¦¾à¦“à§Ÿà¦¾à¥¤",
      "à¦¤à§‹à¦®à¦¾à¦° à¦ªà§à¦°à¦¤à¦¿ à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¾ à¦•à§‹à¦¨à§‹à¦¦à¦¿à¦¨ à¦•à¦®à¦¬à§‡ à¦¨à¦¾à¥¤",
      "à¦¤à§‹à¦®à¦¾à¦° à¦œà¦¨à§à¦¯ à¦†à¦®à¦¾à¦° à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¾ à¦šà¦¿à¦°à¦¨à§à¦¤à¦¨à¥¤",
      "à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¾ à¦®à¦¾à¦¨à§‡ à¦à¦•à§‡ à¦…à¦ªà¦°à§‡à¦° à¦®à¦¾à¦à§‡ à¦¬à§‡à¦à¦šà§‡ à¦¥à¦¾à¦•à¦¾à¥¤",
      "à¦¤à§‹à¦®à¦¾à¦° à¦¸à§à¦ªà¦°à§à¦¶ à¦†à¦®à¦¾à¦° à¦œà§€à¦¬à¦¨à§‡à¦° à¦†à¦¶à§€à¦°à§à¦¬à¦¾à¦¦à¥¤",
      "à¦¤à§à¦®à¦¿ à¦†à¦®à¦¾à¦° à¦¸à§à¦–à§‡à¦° à¦•à¦¾à¦°à¦£à¥¤",
      "à¦¤à§à¦®à¦¿ à¦›à¦¾à¦¡à¦¼à¦¾ à¦†à¦®à¦¾à¦° à¦¦à¦¿à¦¨ à¦¶à§à¦°à§à¦‡ à¦¹à¦¯à¦¼ à¦¨à¦¾à¥¤",
      "à¦¤à§‹à¦®à¦¾à¦° à¦šà§‹à¦–à§‡à¦‡ à¦†à¦®à¦¾à¦° à¦ªà§ƒà¦¥à¦¿à¦¬à§€à¥¤",
      "à¦¤à§à¦®à¦¿ à¦¨à¦¾ à¦¥à¦¾à¦•à¦²à§‡ à¦†à¦®à¦¾à¦° à¦•à¦¿à¦›à§à¦‡ à¦­à¦¾à¦²à§‹ à¦²à¦¾à¦—à§‡ à¦¨à¦¾à¥¤",
      "à¦¤à§à¦®à¦¿ à¦›à¦¾à§œà¦¾ à¦•à¦¿à¦›à§à¦‡ à¦•à¦²à§à¦ªà¦¨à¦¾ à¦•à¦°à¦¾ à¦¯à¦¾à§Ÿ à¦¨à¦¾à¥¤",
      "à¦¤à§‹à¦®à¦¾à¦° à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¾ à¦†à¦®à¦¾à¦° à¦à¦•à¦®à¦¾à¦¤à§à¦° à¦­à¦°à¦¸à¦¾à¥¤",
      "à¦¤à§‹à¦®à¦¾à¦° à¦¸à§à¦®à§ƒà¦¤à¦¿à¦¤à§‡à¦‡ à¦¬à¦¾à¦à¦šà¦¿ à¦†à¦®à¦¿à¥¤",
      "à¦¤à§à¦®à¦¿ à¦†à¦®à¦¾à¦° à¦¹à§ƒà¦¦à§Ÿà§‡à¦° à¦à¦•à¦®à¦¾à¦¤à§à¦° à¦®à¦¾à¦²à¦¿à¦•à¥¤",
      "à¦¤à§‹à¦®à¦¾à¦° à¦à¦•à¦Ÿà¦¿ à¦¹à¦¾à¦¸à¦¿à¦‡ à¦†à¦®à¦¾à¦° à¦®à¦¨ à¦­à¦¾à¦²à§‹ à¦•à¦°à§‡ à¦¦à§‡à§Ÿà¥¤",
      "à¦¤à§‹à¦®à¦¾à¦•à§‡ à¦›à¦¾à§œà¦¾ à¦à¦• à¦®à§à¦¹à§‚à¦°à§à¦¤à¦“ à¦•à¦²à§à¦ªà¦¨à¦¾ à¦•à¦°à¦¤à§‡ à¦ªà¦¾à¦°à¦¿ à¦¨à¦¾à¥¤",
      "à¦¤à§à¦®à¦¿ à¦†à¦®à¦¾à¦° à¦ªà§à¦°à¦¿à§Ÿà¦¤à¦®à¥¤",
      "à¦¤à§‹à¦®à¦¾à¦° à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¾à§Ÿ à¦¨à¦¿à¦œà§‡à¦•à§‡ à¦­à¦¾à¦—à§à¦¯à¦¬à¦¾à¦¨ à¦®à¦¨à§‡ à¦•à¦°à¦¿à¥¤",
      "à¦¤à§à¦®à¦¿ à¦ªà¦¾à¦¶à§‡ à¦¥à¦¾à¦•à¦²à§‡à¦‡ à¦†à¦®à¦¿ à¦¶à¦•à§à¦¤à¦¿ à¦ªà¦¾à¦‡à¥¤",
      "à¦¤à§‹à¦®à¦¾à¦° à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¾ à¦†à¦®à¦¾à¦•à§‡ à¦œà§€à¦¬à¦¨à§‡ à¦à¦—à¦¿à§Ÿà§‡ à¦¯à§‡à¦¤à§‡ à¦¸à¦¾à¦¹à¦¾à¦¯à§à¦¯ à¦•à¦°à§‡à¥¤",
      // Add more sentences up to 100 as needed
    ];

    const timeDhaka = moment().tz("Asia/Dhaka").format("hh:mm A");
    const botName = "NOOB BOTV2";

    const message = (sentence) => `â€¢â€”Â»ðŸ©· ð“ðˆðŒð„ ${timeDhaka} ðŸ©·Â«â€”â€¢\n\nâœ¢â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”âœ¢\n\n-â€¢â€¢ðŸŒ»ðŸ¦‹ðŸ¤${sentence}ðŸ¦‹ðŸŒ¼\n\nâœ¢â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”âœ¢\nâƒâ€”ÍŸÍŸÍžÍž ${botName}ð“†ª___//ðŸ©·ðŸª½`;

    for (const thread of groupThreads) {
      const randomSentence = romanticSentences[Math.floor(Math.random() * romanticSentences.length)];
      try {
        await api.sendMessage(message(randomSentence), thread.threadID);
        await new Promise(resolve => setTimeout(resolve, 4000)); // Wait between messages
      } catch (err) {
        console.log(`Failed to send message to ${thread.threadID}:`, err.message);
      }
    }
  }
};
